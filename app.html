<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>LockAllGroups</title>
  <script src="https://miro.com/app/static/sdk/v2/miro.js"></script>
</head>
<body>
  <script>
    async function lockAllGroups() {
      const items = await miro.board.get({ type: ['frame', 'image', 'shape'] });

      for (const item of items) {
        try {
          await miro.board.update({
            id: item.id,
            locked: true
          });
          console.log(`🔒 Заблокирован: ${item.type} id=${item.id}`);
        } catch (e) {
          console.error(`❌ Не удалось залочить объект`, item, e);
        }
      }

      miro.board.ui.notify(`🔒 Заблокировано объектов: ${items.length}`);
    }

    miro.board.onReady(() => {
      lockAllGroups();
    });
  </script>
</body>
</html>
