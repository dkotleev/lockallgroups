<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>LockAllGroups</title>
  <script src="https://miro.com/app/static/sdk/v2/miro.js"></script>
</head>
<body>
  <script>
    async function lockAllGroups() {
      // –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ –≥—Ä—É–ø–ø—ã
      const groups = await miro.board.get({ type: 'group' });
      let totalLocked = 0;

      for (const group of groups) {
        // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤–Ω—É—Ç—Ä–∏ –≥—Ä—É–ø–ø—ã
        const items = await group.getItems();
        for (const item of items) {
          try {
            await item.lock();
            totalLocked++;
          } catch (e) {
            console.error("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–ª–æ—á–∏—Ç—å –æ–±—ä–µ–∫—Ç", item, e);
          }
        }
      }

      // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ Miro
      if (groups.length > 0) {
        await miro.board.notifications.showInfo(`üîí Locked ${totalLocked} objects in ${groups.length} groups`);
      } else {
        await miro.board.notifications.showInfo("‚ÑπÔ∏è No groups found to lock");
      }
    }

    // –ó–∞–ø—É—Å–∫ —Å—Ä–∞–∑—É –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    lockAllGroups();
  </script>
</body>
</html>
