<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>LockAllGroups</title>
  <script src="https://miro.com/app/static/sdk/v2/miro.js"></script>
</head>
<body>
<script>
(async () => {
  if (miro.onReady) { try { await miro.onReady(); } catch (e) {} }

  try {
    console.log("LockAllGroups started");
    await miro.board.notifications.showInfo("üöÄ LockAllGroups started");

    const groups = await miro.board.get({ type: 'group' });
    console.log("Found groups:", groups.length);

    for (const group of groups) {
      try {
        await group.sync();
      } catch (e) {
        console.warn("Group sync failed:", e);
      }
    }

    console.log("LockAllGroups done");
    await miro.board.notifications.showInfo("‚úÖ LockAllGroups done");
  } catch (err) {
    console.error("LockAllGroups error:", err);
    if (miro.board?.notifications?.showError) {
      await miro.board.notifications.showError("‚ùå LockAllGroups error: " + (err?.message || err));
    }
  }
})();
</script>
</body>
</html>
